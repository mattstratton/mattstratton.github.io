
<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">


<title>
Creating multiple validator keys in Chef
</title>
<link rel="canonical" href="https://www.mattstratton.io/creating-multiple-validator-keys-in-chef/">

<link rel="stylesheet" href="https://www.mattstratton.io/css/reset.css">
<link rel="stylesheet" href="https://www.mattstratton.io/css/pygments.css">
<link rel="stylesheet" href="https://www.mattstratton.io/css/main.css">
 
<link rel="stylesheet" href="https://www.mattstratton.io/css/mywebfontsfile.css">



<link rel="shortcut icon"

    href="https://www.mattstratton.io/img/favicon.ico"

>



</head>


<body lang="en">

<div class="section header">
    <div class="container">
        <div class="content">
            <nav>
                <ul>
                    <a href="https://www.mattstratton.io/posts"><li>posts</li></a>
                    <a href="https://www.mattstratton.io/about"><li>about</li></a>
                    <a href="https://www.mattstratton.io/speaking"><li>speaking</li></a>
                </ul>
            </nav>
            <a href="https://www.mattstratton.io/"><div class="name">Matt Stratton</div></a>
        </div>
    </div>
</div>

<div class="section icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/mattstratton" target="_blank">
                <i class="icon ion-social-github"></i>
            </a>
        

        
            <a href="//twitter.com/mattstratton" target="_blank">
                <i class="icon ion-social-twitter"></i>
            </a>
        

        
            <a href="//linkedin.com/in/mattstratton" target="_blank">
                <i class="icon ion-social-linkedin"></i>
            </a>
        

        
            <a href="//facebook.com/matt.stratton" target="_blank">
                <i class="icon ion-social-facebook larger"></i>
            </a>
        

        

        
            <a href="mailto:matt.stratton@gmail.com">
                <i class="icon ion-ios-email larger"></i>
            </a>
        
        </div>
    </div>
</div>


<body lang="en">

<div class="section main post">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <a href="https://www.mattstratton.io/creating-multiple-validator-keys-in-chef/"><div class="page-heading">

    Creating multiple validator keys in Chef

</div>

</a>
                <div class="meta">
                    <div class="date">Sep 9, 2015</div>
                    <div class="word-count"><div class="middot"></div>300 words</div>
                    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                </div>
            </div>
            <div class="markdown">
                

<p>By default, many folks think that there is one (and only one) validator key for a Chef organization. Which brings up a few issues:</p>

<ul>
<li>If the validator key ever needs to be reset, then everyone who was using that key is screwed.</li>
<li>If the validator key is compromised, then it must be reset for everyone.</li>
</ul>

<p>The good news is that you can have as many validator keys as you want. For example, every user who has the capability of performing <code>knife bootstrap</code> might have their own. Or you might use a different key for your Azure provisioning than for your VMware provisioining, etc. This is a really easy thing to do.</p>

<h2 id="adding-a-validator-client-via-knife:34526d18ffb1d4e9e664c0aa33873b42">Adding a validator client via knife</h2>

<p><code>knife client create mstratton_validator_test --file mstratton_validator_test.pem --validator</code></p>

<p>After you do this, your editor will pop open which lets you make changes to the client configuration if you would like. You can use the <code>--disable-editing</code> flag to remove this capability. The <code>--file</code> flag will specify where you would like the private key to be written to.</p>

<h2 id="adding-a-validator-client-via-chef-manage-https-docs-chef-io-manage-html:34526d18ffb1d4e9e664c0aa33873b42">Adding a validator client via <a href="https://docs.chef.io/manage.html">Chef Manage</a></h2>

<p>Log onto your Chef Manage UI. If you use Hosted Chef, the url is <a href="http://manage.chef.io">http://manage.chef.io</a></p>

<p><img src="https://www.mattstratton.io/img/validator/Chef_Manage1.png" alt="Example image" />

<img src="https://www.mattstratton.io/img/validator/Chef_Manage2.png" alt="Example image" />

<img src="https://www.mattstratton.io/img/validator/Chef_Manage3.png" alt="Example image" />

<img src="https://www.mattstratton.io/img/validator/Chef_Manage4.png" alt="Example image" />

<img src="https://www.mattstratton.io/img/validator/Chef_Manage5.png" alt="Example image" />
</p>

<p><em>Note - I have deleted this validator client, so don&rsquo;t think you&rsquo;re gonna be slick and hack the private key</em></p>

<p>It&rsquo;s that simple! You now have another validation client for your use.</p>

                <br>
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mattstrattonio';
    var disqus_identifier = 'https:\/\/www.mattstratton.io\/creating-multiple-validator-keys-in-chef\/';
    var disqus_title = 'Creating multiple validator keys in Chef';
    var disqus_url = 'https:\/\/www.mattstratton.io\/creating-multiple-validator-keys-in-chef\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                <br>
                <p><a href="https://www.mattstratton.io/posts">Back to posts</a></p>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
    var pageTracker = _gat._getTracker("UA-66839838-1");
    pageTracker._trackPageview();
} catch(err) {}
</script>



</body>
</html>

